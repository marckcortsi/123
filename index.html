<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Series</title>
    <link rel="stylesheet" href="style.css"> <!-- Aseg煤rate de enlazar tu archivo CSS -->
    <!-- Librer铆a jsQR para escaneo de c贸digos QR -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
</head>
<body>
    <!-- Bot贸n para alternar entre tema claro y oscuro -->
    <button class="theme-toggle" id="themeToggle"></button>

    <div class="container">
        <h1>Registro de Series</h1>

        <!-- Secci贸n de inicio -->
        <button id="startButton" class="section visible">Comenzar</button>

        <!-- Bot贸n para ver reportes anteriores -->
        <button id="viewReportsButton" class="section visible">Ver Reportes Anteriores</button>
        <ul id="reportList" class="section visible"></ul> <!-- Lista de reportes anteriores -->

        <!-- Secci贸n para ingresar el c贸digo del producto -->
        <div id="productSection" class="section">
            <h2>Ingresar c贸digo de producto</h2>
            <input type="text" id="productCode" placeholder="C贸digo de producto">
            <button id="acceptProduct">Aceptar</button>
            <div id="productError" class="alert">Por favor, ingrese un c贸digo de producto v谩lido.</div>
            <button id="backToSeriesFromProduct" class="red-button">Regresar</button> <!-- Bot贸n para regresar -->
        </div>

        <!-- Secci贸n para registrar series -->
        <div id="seriesSection" class="section">
            <div id="counter">Registrando: Producto | Series: 0</div>
            <h2>Escanear o ingresar serie</h2>
            <input type="text" id="seriesCode" placeholder="C贸digo de serie">
            <input type="number" id="seriesQuantity" placeholder="Cantidad (Opcional)">
            <button id="registerSeries">Registrar Serie</button>
            <button id="newProduct">Registrar Nuevo Producto</button>
            <button id="finish">Finalizar</button>
            <div id="seriesError" class="alert">Por favor, ingrese un c贸digo de serie v谩lido.</div>
        </div>

        <!-- Secci贸n para finalizar y descargar reporte -->
        <div id="finishSection" class="section">
            <h2>Finalizar Pedido</h2>
            <input type="text" id="orderNumber" placeholder="N煤mero de pedido">
            <button id="generateReport">Generar Reporte</button>
            <div id="reportError" class="alert">Por favor, ingrese un n煤mero de pedido v谩lido.</div>
            <button id="backToSeriesFromFinish" class="red-button">Regresar</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="script.js"></script> <!-- Aseg煤rate de enlazar correctamente tu archivo JS -->

    <script>
        // Selecciona el bot贸n de alternar tema
        const themeToggle = document.getElementById('themeToggle');

        // Almacena el estado del modo en localStorage para recordar la preferencia del usuario
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme) {
            document.body.classList.add(currentTheme);
            if (currentTheme === 'light-mode') {
                themeToggle.textContent = ''; // Icono de sol
            }
        }

        // Alternar entre modo claro y oscuro
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            const theme = document.body.classList.contains('light-mode') ? 'light-mode' : 'dark-mode';
            localStorage.setItem('theme', theme);

            // Cambiar el icono
            if (theme === 'light-mode') {
                themeToggle.textContent = ''; // Icono de sol
            } else {
                themeToggle.textContent = ''; // Icono de luna
            }
        });
    </script>
</body>
</html>
